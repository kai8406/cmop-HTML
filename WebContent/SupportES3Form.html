<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Sobey--云平台服务-ES3申请</title>
<!-- Le styles -->
<link href="css/cmop.css" rel="stylesheet">
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="jquery-ui/css/overcast/jquery-ui-1.8.21.custom.css"
	rel="stylesheet">
<style type="text/css">
.alert {
	padding: 8px 35px 8px 14px;
	margin-bottom: 0px;
	color: black;
	text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
	background-color: #fff;
	border: 1px solid #fff;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
}
</style>
<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
     <script src="js/html5.js"></script>
    <![endif]-->
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/cmop.js"></script>
<script src="jquery-ui/js/jquery-ui-1.8.21.custom.min.js"></script>
<script src="jquery-ui/js/jquery.ui.datepicker-zh-CN.js"></script>

<script>
	$(document).ready(function() {

		//聚焦指定的Tab
		$("#support-tab").addClass("active");

		//点击modal确定按钮
		$("#modalSave").click(function() {
				//清空
			  $("a.mountBtn[name='mountBtn']").parent().parent().find("#mountServer").empty();
			
			//将选中的实例ID显示在a标签name为mountBtn所在的挂载行中.
			  $(this).parent().parent().find("tbody #ids:checked").each(function(){
				 $("a.mountBtn[name='mountBtn']").parent().parent().find("#mountServer").append($(this).val()+"-");
			  });
			  
			  $("a.mountBtn").attr("name","");//将class为mountBtn的a标签name 设置为""
		});
		
		
		
		$("#mountBtn").live("click",function(){
			//设置class 包含mountBtn的a标签name为指定的值用于区分哪个存储空间执行挂载
			
			 $("a.mountBtn").attr("name","");//将class为mountBtn的a标签name 设置为""
			
			$(this).attr("name","mountBtn");
			
			//默认清空checkbox
			$("input:checkbox[name='ids']").removeAttr('checked');

		});
		

		switchTab();

		//起始时间
		$("#serviceStart").datepicker();
		$("#serviceEnd").datepicker();

		$("#serviceStart").val(getDateByMonthNum(0)); // 一个月后的日期
		$("#serviceEnd").val(getDateByMonthNum(1)); // 一个月后的日期

		inputServiceDate();
		
		$("#createStorage").click(function(){
			
			/*存储资源*/
			if($("#otherSpace").is(":checked")){
				$("#otherSpace").val($("#otherSpaceValue").val());
				
				$("#otherSpaceValue").focusout(function(){
					$("#otherSpace").val($("#otherSpaceValue").val());
				});
			}
			
			var dataSorageSpace = $("input[name='dataSorageSpace']:checked").val();
		
			//插入挂载行
			 str = "<div class='row alert' id='storageList'>";
			 str +="<div class='span1' id='space'>"+dataSorageSpace+"&nbsp;GB</div>";
			 str +="<div class='hidden' id='space_value'>"+dataSorageSpace+"</div>";
			 str +="<div class='span1 '><a id='mountBtn' name='' class='btn btn-warning mountBtn' data-toggle='modal' href='#es3Modal'>挂载</a></div>";
			 str +="<div id='mountServer' class='span4'></div>";
			 str +="<button class='close' id='removeStorage' data-dismiss='alert'>&times;</button></div>";
			$("#storageAllList").append(str);
			
		 
		});

	});
</script>

</head>
<body>

	<div class="container">

		<!-- Header -->
		<div class="page-header">
			<h1>
				Sobey<small>--云平台服务</small>
			</h1>
		</div>

		<!-- Menu -->
		<div id="menu">
			<ul class="nav nav-tabs">
				<li id="home-tab"><a href="./Home.html">主页</a></li>
				<li id="support-tab"><a href="./SupportList.html">服务申请</a></li>
				<li id="feature-tab"><a href="./FeatureList.html">服务变更</a></li>
				<li id="bug-tab"><a href="./BugList.html">故障申报</a></li>
				<li id="audit-tab"><a href="./AuditList.html">审核</a></li>
				<li><a href="./Login.html">退出登录</a></li>
			</ul>
		</div>

		<div class="row">
			<!-- Guide -->
			<div id="Guide" class="span2">
				<div class="tabbable tabs-left">
					<ul class="nav nav-tabs" id="myTab">
						<li class="active"><a href="#profile1" data-toggle="tab">1.ES3申请</a></li>
						<li><a href="#profile2" data-toggle="tab">2.ES3</a></li>
						<li><a href="#profile3" data-toggle="tab">3.提交</a></li>
					</ul>
				</div>
			</div>

			<div id="main" class="span10">
				<form action="./SupportList.html" class="form-horizontal">

					<div class="tab-content">

						<!-- 第1步 -->
						<div class="tab-pane fade in active span6" id="profile1">
							<fieldset>
								<legend>ES3申请</legend>

								<div class="control-group">
									<label class="control-label">资源类型</label>
									<div class="controls">
										<label class="radio"> <input type="radio"
											id="resourceType" value="1" name="resourceType" />生产资源
										</label> <label class="radio"> <input type="radio"
											id="resourceType" value="2" name="resourceType"
											checked="checked" /> 测试/演示资源
										</label> <label class="radio"> <input type="radio"
											id="resourceType" value="3" name="resourceType" /> 公测资源
										</label>
									</div>
								</div>


								<div class="control-group">
									<label class="control-label">申请起始时间</label>
									<div class="controls">
										<input type="text" id="serviceStart" name="serviceStart"
											value="" class="input-medium" /> &mdash; <input type="text"
											id="serviceEnd" name="serviceEnd" value=""
											class="input-medium" />
									</div>
								</div>

								<div class="control-group">
									<label class="control-label">申请用途</label>
									<div class="controls">
										<textarea rows="2" id="usage" name="usage"
											class="input-xlarge"></textarea>
									</div>
								</div>
							</fieldset>

							<hr />
							<div>
								<a id="nextStep" class="btn btn-info">下一步</a>
							</div>
						</div>

						<!-- 第2步 -->
						<div class="tab-pane fade span8" id="profile2">
							
							
							<fieldset>
								<legend>存储资源</legend>
								
								
								<div class="control-group">
									<label class="control-label">容量空间</label>
									<div class="controls">
										<label class="radio inline	"> <input type="radio" value="20"
											name="dataSorageSpace" /> 20GB
										</label> <label class="radio inline"> <input type="radio" value="30"
											name="dataSorageSpace" /> 30GB
										</label> <label class="radio inline"> <input type="radio" value="50"
											name="dataSorageSpace" /> 50GB
										</label> <label class="radio inline"> <input type="radio" value="100"
											name="dataSorageSpace" /> 100GB
										</label> <label class="radio inline"> <input type="radio" value="200"
											name="dataSorageSpace" /> 200GB
										</label> <label class="radio inline"> <input id="otherSpace" type="radio" value=""
											name="dataSorageSpace" />其它 <input  id="otherSpaceValue" type="text" value=""
											class="input-mini" />
										</label>
									</div>
								</div>
								
								<div class="control-group">
									<label class="control-label"></label>
										<div class="controls">
									 <a class="btn " id="createStorage" >增加</a>			
									</div>
								</div>
								
								
								
							</fieldset>
							
							
							<div id="storageAllList" class="span8">


								<div id="storageList" class="row alert">
									<div id="space" class="span1">20&nbsp;GB</div>
									<div id="space_value" class="hidden">20</div>
									<div class="span1">
										<a href="#es3Modal" data-toggle="modal" name="" class="btn btn-warning mountBtn" id="mountBtn">挂载</a>
									</div>
									<div id="mountServer" class="span4"></div>
									<button data-dismiss="alert" id="removeStorage" class="close">×</button>
								</div>

							</div>
							
							<hr >
							<div>
								<a id="backStep" class="btn">返回</a> <a id="nextStep"
									class="btn btn-info">下一步</a>
							</div>
						</div>

						<!-- 第3步 -->
						<div class="tab-pane fade span8" id="profile3">
							<fieldset>
								<legend>ES3申请详情</legend>

								<table class="table table-bordered table-striped">
									<colgroup>
										<col class="span2">
										<col class="span6">
									</colgroup>
									<thead>
										<tr>
											<th>Tag</th>
											<th>Description</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td>申请主题</td>
											<td id="td_title"></td>
										</tr>
										<tr>
											<td>起始时间</td>
											<td id="td_time"></td>
										</tr>
										<tr>
											<td>申请用途</td>
											<td id="td_usage"></td>
										</tr>
										<tr>
											<td>资源类型</td>
											<td id="td_resourceType"></td>
										</tr>
										<tr>
											<td>容量空间</td>
											<td>500G</td>
										</tr>
									</tbody>
								</table>

							</fieldset>

							<hr />
							<div>
								<a id="backStep" class="btn ">返回</a>
								<button class="btn btn-primary">保存修改</button>
							</div>
						</div>

					</div>

				</form>
			</div>
		</div>

		<div id="es3Modal" class="modal hide fade form-horizontal ">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h3>Modal Heading</h3>
			</div>
			<div class="modal-body">

				<!-- Table -->
				<table class="table table-striped table-bordered table-condensed">
					<colgroup>
						<col class="span1">
						<col class="span2">
						<col class="span6">
						<col class="span2">
					</colgroup>
					<thead>
						<tr>
							<th>#</th>
							<th>实例ID</th>
							<th>ECS规格</th>
							<th>创建时间</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td><input id="ids" type="checkbox" name="ids" value="11111111111" /></td>
							<td>EDL38ADF9</td>
							<td>Small-CPU[单核] Memory[1GB] Disk[20GB]</td>
							<td>2012/8/6</td>
						</tr>
						<tr>
							<td><input id="ids" type="checkbox" name="ids" value="222222222" /></td>
							<td>EDL38ADF9</td>
							<td>Small-CPU[单核] Memory[1GB] Disk[20GB]</td>
							<td>2012/8/6</td>
						</tr>
						<tr>
							<td><input id="ids" type="checkbox" name="ids" value="3333333333333"/></td>
							<td>EDL38ADF9</td>
							<td>Small-CPU[单核] Memory[1GB] Disk[20GB]</td>
							<td>2012/8/6</td>
						</tr>
						<tr>
							<td><input id="ids" type="checkbox" name="ids" value="44444444444444" /></td>
							<td>EDL38ADF9</td>
							<td>Small-CPU[单核] Memory[1GB] Disk[20GB]</td>
							<td>2012/8/6</td>
						</tr>
						<tr>
							<td><input id="ids" type="checkbox" name="ids" value="55555555555" /></td>
							<td>EDL38ADF9</td>
							<td>Small-CPU[单核] Memory[1GB] Disk[20GB]</td>
							<td>2012/8/6</td>
						</tr>


					</tbody>
				</table>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal">取消</a> <a href="#"
					id="modalSave" data-dismiss="modal" name="" class="btn btn-primary">确定</a>
			</div>
		</div>


		<!-- Footer -->
		<div id="footer" class="span12">Copyright &copy; 2005-2012</div>

	</div>
</body>
</html>